.TH QMAIL-RCPTCHECK 8 2018-12-30
.SH NAME
qmail-rcptcheck \- run a sequence of sender/recipient checks
.SH SYNOPSIS
.B qmail-rcptcheck
.SH DESCRIPTION
.B qmail-rcptcheck
runs an administrator-defined sequence of filters
on SMTP envelope senders and recipients.
Filters must adhere to the
.B RCPTCHECK
interface.
If any filter rejects, the message is rejected.
.PP
.B qmail-rcptcheck
is most commonly invoked from
.B qmail-smtpd
patched with either
.B qmail-spp
or
.BR RCPTCHECK .
.SH "ENVIRONMENT VARIABLES"
To run under
.BR qmail-spp :
none needed.
.PP
To run under
.BR RCPTCHECK :
set
.B RCPTCHECK
to
.I /var/qmail/bin/qmail-rcptcheck
(typically in your
.BR tcpserver 's
tcprules).
.PP
To write a filter:
.TP 5
.I SENDER
contains the envelope sender.
.TP 5
.I RECIPIENT
contains the envelope recipient.
.SH "CONTROL FILES"
To run under
.BR qmail-spp :
add
.I /var/qmail/bin/qmail-rcptcheck
in the
.I [rcpt]
section of
.IR smtpplugins .
.PP
To run under
.BR RCPTCHECK :
none needed.
.PP
To control
.BR qmail-rcptcheck :
.TP 5
.I rcptchecks
Sequence of filter programs (one per line).
.SH "EXIT CODES"
As defined by the
.B RCPTCHECK
interface,
.I 120
is reserved.
Filters should exit
.I 111
when unable to verify,
.I 100
to reject, or
any other non-reserved code to accept.
.SH COMPATIBILITY
.BR RCPTCHECK -compatible
filter programs can run unmodified under
.B qmail-spp
simply by running them from
.BR qmail-rcptcheck .
.SH "EXAMPLES"
See
.IR https://schmonz.com/qmail/rejectutils .
.SH "AUTHOR"
.B Amitai Schleier <schmonz-web-rejectutils@schmonz.com>
.SH HISTORY
Based on this code from Jay Soffian:
.PP
.I http://www.soffian.org/downloads/qmail/qmail-smtpd-doc.html
.SH "SEE ALSO"
qmail-rcptcheck-badrcptto(8),
qmail-rcptcheck-qregex(8),
qmail-rcptcheck-realrcptto(8),
qmail-smtpd(8).
.PP
.I http://qmail-spp.sourceforge.net/doc/
